{"ast":null,"code":"import React,{useEffect,useState}from'react';import'../css/Postdetails.css';import{useNavigate}from'react-router-dom';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PostDetail(_ref){let{item,toggleshow}=_ref;const[data,setData]=useState([]);const[comment,setComment]=useState(\"\");const navigate=useNavigate();const notifyA=msg=>toast.error(msg);const notifyB=msg=>toast.success(msg);useEffect(()=>{const token=localStorage.getItem(\"token\");if(!token){navigate('/signin');}},[comment]);const removePost=postId=>{if(window.confirm(\"Do really want to delete this post ?\")){console.log(postId);fetch(\"/deletePost/\".concat(postId),{method:'delete',headers:{Authorization:'Bearer '+localStorage.getItem('token')}}).then(res=>{res.json();}).then(result=>{console.log(result);toggleshow();navigate('/profile');notifyB(result.message);});}};const makeComment=(text,id)=>{fetch('/comment',{method:'put',headers:{'Content-Type':'application/json',Authorization:'Bearer '+localStorage.getItem('token')},body:JSON.stringify({text:text,postId:id})}).then(res=>res.json()).then(result=>{const newData=data.map(post=>{if(post._id==result._id){return result;}else{return post;}});setData(newData);setComment(\"\");notifyA(\"Comment posted!\");console.log(result);});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"showComment\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"postPic\",children:/*#__PURE__*/_jsx(\"img\",{src:item.photo,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-pic\",children:/*#__PURE__*/_jsx(\"img\",{src:item.postedBy.photo,alt:\"oops\"})}),/*#__PURE__*/_jsx(\"h5\",{className:\"profile-name\",children:item.postedBy.name}),/*#__PURE__*/_jsx(\"div\",{className:\"delete\",onClick:()=>{removePost(item._id);},children:/*#__PURE__*/_jsx(\"span\",{className:\"material-symbols-outlined\",children:\"delete\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-section\",children:item.comments.map(comment=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"comm\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"commenter\",style:{fontWeight:'bold'},children:comment.postedBy.name}),/*#__PURE__*/_jsx(\"p\",{className:\"commentText\",children:comment.comment})]});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[item.like.length,\" Likes\"]}),/*#__PURE__*/_jsx(\"p\",{children:item.body})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-comment\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-symbols-outlined emoji\",children:\"mood\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Add message\",value:comment,onChange:e=>{setComment(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"material-symbols-outlined send\",onClick:()=>{makeComment(comment,item._id);toggleComment();},children:\"send\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"close\",onClick:()=>{toggleshow();},children:/*#__PURE__*/_jsx(\"span\",{class:\"material-symbols-outlined material-symbols-outlined-close\",children:\"close\"})})]})});}","map":{"version":3,"names":["React","useEffect","useState","useNavigate","toast","jsx","_jsx","jsxs","_jsxs","PostDetail","_ref","item","toggleshow","data","setData","comment","setComment","navigate","notifyA","msg","error","notifyB","success","token","localStorage","getItem","removePost","postId","window","confirm","console","log","fetch","concat","method","headers","Authorization","then","res","json","result","message","makeComment","text","id","body","JSON","stringify","newData","map","post","_id","children","className","src","photo","alt","postedBy","name","onClick","comments","style","fontWeight","like","length","type","placeholder","value","onChange","e","target","toggleComment","class"],"sources":["D:/react/AD/proj-clone-main/frontend/src/components/PostDetail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport '../css/Postdetails.css'\nimport { useNavigate } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nexport default function PostDetail({ item, toggleshow }) {\n  const [data, setData] = useState([]);\n  const [comment, setComment] = useState(\"\");\n\n  const navigate= useNavigate()\n\n  const notifyA = (msg)=> toast.error(msg)\n  const notifyB = (msg)=> toast.success(msg)\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\")\n    if (!token) {\n      navigate('/signin')\n    }\n\n  }, [comment])\n\n    const removePost=(postId)=>{\n      if(window.confirm(\"Do really want to delete this post ?\")){\n\n        console.log(postId)\n        fetch(`/deletePost/${postId}`,{\n            method:'delete',\n            headers:{\n                Authorization: 'Bearer ' +localStorage.getItem('token'),\n            }\n        })\n        .then((res)=>{res.json()})\n        .then((result)=>{\n            console.log(result)\n            toggleshow()\n            navigate('/profile')\n            notifyB(result.message)\n        })\n      }\n    }\n\n    const makeComment = (text, id) => {\n      fetch('/comment', {\n        method: 'put',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: 'Bearer ' + localStorage.getItem('token'),\n        },\n        body: JSON.stringify({\n          text: text,\n          postId: id,\n        })\n      })\n        .then((res) => res.json())\n        .then((result) => { \n          const newData = data.map((post) => {\n            if (post._id == result._id) { \n              return result\n            }\n            else {\n              return post\n            }\n          })\n          setData(newData)\n          setComment(\"\")\n          notifyA(\"Comment posted!\")\n          console.log(result)\n        })\n    }\n  \n\n  return (\n    <div>\n        <div className='showComment'>\n        <div className='container'>\n          <div className='postPic'>\n            <img src={item.photo} alt=\"\" />\n          </div>\n          <div className=\"details\">\n            <div className=\"card-header\">\n              <div className=\"card-pic\">\n                <img src={item.postedBy.photo} alt=\"oops\" />\n              </div>\n              <h5 className='profile-name'>{item.postedBy.name}</h5>\n              <div className=\"delete\" onClick={()=>{\n                removePost(item._id)\n                }}>\n              <span className=\"material-symbols-outlined\" >delete</span>\n              </div>\n            </div>\n           <div className=\"comment-section\">\n            {item.comments.map((comment)=>{\n             return (\n            <div className='comm'>\n              <p className='commenter' style={{fontWeight: 'bold'}}>{comment.postedBy.name}</p>\n              <p className='commentText'>{comment.comment}</p>\n            </div>\n              )\n            })}\n            \n           </div>\n            <div className=\"card-content\">\n              <p>{item.like.length} Likes</p>\n              <p>{item.body}</p>\n            </div>\n            <div className=\"add-comment\">\n              <span className='material-symbols-outlined emoji'>mood</span>\n              <input type=\"text\" placeholder='Add message' \n              value={comment} onChange={(e) => { setComment(e.target.value) }} \n              />\n              <button className=\"material-symbols-outlined send\" \n              onClick={()=>{\n                makeComment(comment, item._id)\n                toggleComment()\n              }}\n              >send</button>\n            </div>\n          </div>\n        </div>\n        <div className=\"close\" \n        onClick={()=>{\n          toggleshow()\n        }}\n        >\n        <span class=\"material-symbols-outlined material-symbols-outlined-close\">close</span>\n        </div>\n      </div>\n    </div>\n  )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}