{"ast":null,"code":"import React,{useState,useEffect}from'react';import'../css/Profile.css';import{useParams}from'react-router-dom';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserProfile(){const defaultpic=\"https://th.bing.com/th/id/OIP.SAcV4rjQCseubnk32USHigHaHx?rs=1&pid=ImgDetMain\";const{userid}=useParams();const[user,setUser]=useState(\"\");const[post,setPost]=useState([]);const[isFollow,setIsFollow]=useState(false);// Fetch user and post data when component mounts\nuseEffect(()=>{const fetchData=async()=>{try{const res=await fetch(\"/user/\".concat(userid),{headers:{\"Authorization\":\"Bearer \"+localStorage.getItem(\"token\")}});const result=await res.json();setUser(result.user);setPost(result.post||[]);if(result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)){setIsFollow(true);}}catch(error){console.error(\"Error fetching user data:\",error);}};fetchData();},[userid,isFollow]);// Function to follow a user\nconst followUser=async userId=>{try{const res=await fetch('/follow',{method:\"PUT\",headers:{\"Content-Type\":'application/json',\"Authorization\":\"Bearer \"+localStorage.getItem(\"token\")},body:JSON.stringify({followId:userId})});const data=await res.json();console.log(data);setIsFollow(true);}catch(error){console.error(\"Error following user:\",error);}};// Function to unfollow a user\nconst unfollowUser=async userId=>{try{const res=await fetch('/unfollow',{method:\"PUT\",headers:{\"Content-Type\":'application/json',\"Authorization\":\"Bearer \"+localStorage.getItem(\"token\")},body:JSON.stringify({followId:userId})});const data=await res.json();console.log(data);setIsFollow(false);}catch(error){console.error(\"Error unfollowing user:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{src:user.photo?user.photo:defaultpic,alt:\"Profile\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsx(\"h1\",{children:user.name}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"posts\",children:[post.length,\" Posts\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"followbtn\",onClick:()=>{isFollow?unfollowUser(user._id):followUser(user._id);},children:isFollow?\"Unfollow\":\"Follow\"}),/*#__PURE__*/_jsx(\"button\",{className:\"followbtn\",style:{color:\"white\"},children:\"Following\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Posts\"}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" Followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" Following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"100%\",margin:\"25px auto\",opacity:\"0.8\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:post.length>0?post.map(pics=>/*#__PURE__*/_jsx(\"img\",{src:pics.photo,alt:\"Post\"},pics._id)):/*#__PURE__*/_jsx(\"p\",{children:\"No posts available\"})})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","jsx","_jsx","jsxs","_jsxs","UserProfile","defaultpic","userid","user","setUser","post","setPost","isFollow","setIsFollow","fetchData","res","fetch","concat","headers","localStorage","getItem","result","json","followers","includes","JSON","parse","_id","error","console","followUser","userId","method","body","stringify","followId","data","log","unfollowUser","className","children","src","photo","alt","name","style","display","alignItems","length","onClick","color","following","width","margin","opacity","map","pics"],"sources":["D:/react/AD/proj-clone-main/frontend/src/components/Userprofile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport '../css/Profile.css';\nimport { useParams } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\n\nexport default function UserProfile() {\n  const defaultpic = \"https://th.bing.com/th/id/OIP.SAcV4rjQCseubnk32USHigHaHx?rs=1&pid=ImgDetMain\";\n  const { userid } = useParams();\n\n  const [user, setUser] = useState(\"\");\n  const [post, setPost] = useState([]);\n  const [isFollow, setIsFollow] = useState(false);\n\n  // Fetch user and post data when component mounts\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const res = await fetch(`/user/${userid}`, {\n          headers: {\n            \"Authorization\": \"Bearer \" + localStorage.getItem(\"token\"),\n          },\n        });\n        const result = await res.json();\n        \n        setUser(result.user);\n        setPost(result.post || []);\n        \n        if (result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)) {\n          setIsFollow(true);\n        }\n      } catch (error) {\n        console.error(\"Error fetching user data:\", error);\n      }\n    };\n\n    fetchData();\n  }, [userid, isFollow]);\n\n  // Function to follow a user\n  const followUser = async (userId) => {\n    try {\n      const res = await fetch('/follow', {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": 'application/json',\n          \"Authorization\": \"Bearer \" + localStorage.getItem(\"token\"),\n        },\n        body: JSON.stringify({\n          followId: userId,\n        }),\n      });\n      const data = await res.json();\n      console.log(data);\n\n      setIsFollow(true);\n    } catch (error) {\n      console.error(\"Error following user:\", error);\n    }\n  };\n\n  // Function to unfollow a user\n  const unfollowUser = async (userId) => {\n    try {\n      const res = await fetch('/unfollow', {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": 'application/json',\n          \"Authorization\": \"Bearer \" + localStorage.getItem(\"token\"),\n        },\n        body: JSON.stringify({\n          followId: userId,\n        }),\n      });\n      const data = await res.json();\n      console.log(data);\n\n      setIsFollow(false);\n    } catch (error) {\n      console.error(\"Error unfollowing user:\", error);\n    }\n  };\n\n  return (\n    <div className=\"profile\">\n      <div className=\"profile-frame\">\n        <div className=\"profile-pic\">\n          <img src={user.photo ? user.photo : defaultpic} alt=\"Profile\" />\n        </div>\n        <div className=\"profile-data\">\n          <h1>{user.name}</h1>\n          <div style={{ display: \"flex\", alignItems: \"center\" }}>\n            <p className='posts'>{post.length} Posts</p>\n            <button\n              className='followbtn'\n              onClick={() => {\n                isFollow ? unfollowUser(user._id) : followUser(user._id);\n              }}\n            >\n              {isFollow ? \"Unfollow\" : \"Follow\"}\n            </button>\n            <button className='followbtn' style={{ color: \"white\" }}>\n              Following\n            </button>\n          </div>\n          <div className=\"profile-info\">\n            <p>Posts</p>\n            <p>{user.followers ? user.followers.length : \"0\"} Followers</p>\n            <p>{user.following ? user.following.length : \"0\"} Following</p>\n          </div>\n        </div>\n      </div>\n      <hr\n        style={{\n          width: \"100%\",\n          margin: \"25px auto\",\n          opacity: \"0.8\",\n        }}\n      />\n      <div className=\"gallery\">\n        {post.length > 0 ? (\n          post.map((pics) => (\n            <img key={pics._id} src={pics.photo} alt=\"Post\" />\n          ))\n        ) : (\n          <p>No posts available</p>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}