{"ast":null,"code":"import React,{useState,useEffect}from'react';import'../css/Profile.css';import{Link}from'react-router-dom';import PostDetail from'../components/PostDetail';import Profilepic from'../components/Profilepic';import Connection from'../components/Connection';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Profile(){const defaultpic=\"https://th.bing.com/th/id/OIP.SAcV4rjQCseubnk32USHigHaHx?rs=1&pid=ImgDetMain\";const[pic,setPic]=useState([]);const[show,setShow]=useState(false);const[posts,setPosts]=useState([]);const[user,setUser]=useState(\"\");const[changePic,setChangePic]=useState(false);const toggleshow=posts=>{if(show){setShow(false);}else{setShow(true);setPosts(posts);}};useEffect(()=>{fetch(\"/user/\".concat(JSON.parse(localStorage.getItem(\"user\"))._id),{headers:{\"Authorization\":\"Bearer \"+localStorage.getItem(\"token\")}}).then(res=>res.json()).then(result=>{// console.log(result)\nsetPic(result.post);setUser(result.user);// console.log(pic)\n});},[]);const ChangeProfile=()=>{if(changePic){setChangePic(false);}else{setChangePic(true);}};useEffect(()=>{fetch('/userpost',{method:\"get\",headers:{\"Authorization\":\"Bearer \"+localStorage.getItem(\"token\")}}).then(res=>res.json()).then(result=>{setPic(result);}).catch(err=>console.log(err));});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{onClick:ChangeProfile,src:user.photo?user.photo:defaultpic,alt:\"oops\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsx(\"h1\",{children:JSON.parse(localStorage.getItem('user')).name}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[pic?pic.length:\"0\",\" post\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"100%\",margin:\"25px auto\",opacity:\"0.8\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"gallery\",children:[pic.map(pics=>{return/*#__PURE__*/_jsx(\"img\",{src:pics.photo,onClick:()=>{toggleshow(pics);}});}),show&&/*#__PURE__*/_jsx(PostDetail,{item:posts,toggleshow:toggleshow}),changePic&&/*#__PURE__*/_jsx(Profilepic,{changeProfilePic:ChangeProfile})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"connection_div\",children:/*#__PURE__*/_jsxs(Link,{to:\"/connection\",children:[\"Connection\",/*#__PURE__*/_jsx(Connection,{})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","Link","PostDetail","Profilepic","Connection","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","defaultpic","pic","setPic","show","setShow","posts","setPosts","user","setUser","changePic","setChangePic","toggleshow","fetch","concat","JSON","parse","localStorage","getItem","_id","headers","then","res","json","result","post","ChangeProfile","method","catch","err","console","log","children","className","onClick","src","photo","alt","name","length","followers","following","style","width","margin","opacity","map","pics","item","changeProfilePic","to"],"sources":["D:/react/AD/proj-clone-main/frontend/src/screens/Profile.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport '../css/Profile.css'\nimport { Link } from 'react-router-dom'\n\nimport PostDetail from '../components/PostDetail'\nimport Profilepic from '../components/Profilepic'\nimport Connection from '../components/Connection'\n\n\nexport default function Profile() {\n  const defaultpic = \"https://th.bing.com/th/id/OIP.SAcV4rjQCseubnk32USHigHaHx?rs=1&pid=ImgDetMain\"\n  const [pic, setPic]= useState([])\n  const [show, setShow]= useState(false)\n  const [posts, setPosts]= useState([])\n  const [user,setUser] = useState(\"\")\n  const [changePic, setChangePic]= useState(false)\n\n  const toggleshow=(posts)=>{\n    if(show){\n      setShow(false)\n    }else{\n      setShow(true)\n      setPosts(posts)\n    }\n  }\n\n  useEffect(()=>{\n    fetch(`/user/${JSON.parse(localStorage.getItem(\"user\"))._id}`,{\n      headers:{\n        \"Authorization\":\"Bearer \"+localStorage.getItem(\"token\")\n      },\n    }).then(res=>res.json())\n    .then(result=>{\n      // console.log(result)\n      setPic(result.post)\n      setUser(result.user)\n      // console.log(pic)\n    })\n\n  },[])\n\n  const ChangeProfile=()=>{\n    if(changePic){\n      setChangePic(false)\n    }else{\n      setChangePic(true)\n    }\n  }\n\n  useEffect(()=>{\n    fetch('/userpost',{\n      method:\"get\",\n      headers:{\n        \"Authorization\":\"Bearer \"+localStorage.getItem(\"token\")\n      },\n    }).then(res=>res.json())\n    .then(result=>{\n      setPic(result)\n    })\n    .catch(err=>console.log(err))\n  })\n\n  return (\n    <>\n    <div className='profile'>\n      <div className=\"profile-frame\">\n        <div className=\"profile-pic\">\n          <img \n          onClick={ChangeProfile} \n          src={user.photo ? user.photo : defaultpic} alt=\"oops\" />\n        </div>\n        <div className=\"profile-data\">\n          <h1>{JSON.parse(localStorage.getItem('user')).name}</h1>\n          <div className=\"profile-info\">\n            <p>{pic ? pic.length : \"0\"} post</p>\n            <p>{user.followers ? user.followers.length : \"0\"} followers</p>\n            <p>{user.following ? user.following.length : \"0\"} following</p>\n          </div>\n        </div>\n      </div>\n      <hr style={{\n        width:\"100%\",\n        margin:\"25px auto\",\n        opacity:\"0.8\"\n        }}/>\n      <div className=\"gallery\">\n      {pic.map((pics)=>{\n        return <img src={pics.photo} onClick={()=>{toggleshow(pics)}}></img>\n      })}   \n      \n      {show && \n      <PostDetail item={posts}  toggleshow={toggleshow}/>\n      }\n      {\n        changePic && \n        <Profilepic changeProfilePic={ChangeProfile}/>\n      }\n      \n    </div>\n    </div>\n      <div className=\"connection_div\">\n        <Link to='/connection'>Connection\n        {\n          <Connection/>\n        }\n        </Link>\n      </div>\n      </>\n  )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}