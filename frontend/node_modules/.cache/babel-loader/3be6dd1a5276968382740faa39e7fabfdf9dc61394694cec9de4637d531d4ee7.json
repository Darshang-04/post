{"ast":null,"code":"import React,{useState,useEffect}from'react';import'../css/Profile.css';import PostDetail from'../components/PostDetail';import Profilepic from'../components/Profilepic';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(){const defaultpic=\"https://th.bing.com/th/id/OIP.SAcV4rjQCseubnk32USHigHaHx?rs=1&pid=ImgDetMain\";const[pic,setPic]=useState([]);const[show,setShow]=useState(false);const[posts,setPosts]=useState([]);const[user,setUser]=useState(\"\");const[changePic,setChangePic]=useState(false);const[loading,setLoading]=useState(false);// New loading state\nconst toggleshow=posts=>{setShow(!show);if(!show){setPosts(posts);}};useEffect(()=>{fetch(\"/user/\".concat(JSON.parse(localStorage.getItem(\"user\"))._id),{headers:{\"Authorization\":\"Bearer \"+localStorage.getItem(\"token\")}}).then(res=>res.json()).then(result=>{setPic(result.post);setUser(result.user);});},[changePic]);const ChangeProfile=()=>{setChangePic(!changePic);};const handleProfilePicChange=async()=>{setLoading(true);// Start loading\nawait new Promise(resolve=>setTimeout(resolve,2000));// Simulate upload time (Replace this with actual upload logic)\nsetLoading(false);// Stop loading after completion\nsetChangePic(false);// Hide profile pic change modal after completion\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{onClick:ChangeProfile,src:user.photo?user.photo:defaultpic,alt:\"oops\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsx(\"h1\",{children:JSON.parse(localStorage.getItem('user')).name}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[pic?pic.length:\"0\",\" post\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"100%\",margin:\"25px auto\",opacity:\"0.8\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:pic.map(pics=>{return/*#__PURE__*/_jsx(\"img\",{src:pics.photo,onClick:()=>{toggleshow(pics);},alt:\"post\"});})}),show&&/*#__PURE__*/_jsx(PostDetail,{item:posts,toggleshow:toggleshow}),changePic&&/*#__PURE__*/_jsx(Profilepic,{changeProfilePic:handleProfilePicChange// Use the new function to handle profile pic change\n}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Processing...\"}),\" \"]});}","map":{"version":3,"names":["React","useState","useEffect","PostDetail","Profilepic","jsx","_jsx","jsxs","_jsxs","Profile","defaultpic","pic","setPic","show","setShow","posts","setPosts","user","setUser","changePic","setChangePic","loading","setLoading","toggleshow","fetch","concat","JSON","parse","localStorage","getItem","_id","headers","then","res","json","result","post","ChangeProfile","handleProfilePicChange","Promise","resolve","setTimeout","className","children","onClick","src","photo","alt","name","length","followers","following","style","width","margin","opacity","map","pics","item","changeProfilePic"],"sources":["D:/react/AD/proj-clone-main/frontend/src/screens/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport '../css/Profile.css';\n\nimport PostDetail from '../components/PostDetail';\nimport Profilepic from '../components/Profilepic';\n\nexport default function Profile() {\n  const defaultpic = \"https://th.bing.com/th/id/OIP.SAcV4rjQCseubnk32USHigHaHx?rs=1&pid=ImgDetMain\";\n  const [pic, setPic] = useState([]);\n  const [show, setShow] = useState(false);\n  const [posts, setPosts] = useState([]);\n  const [user, setUser] = useState(\"\");\n  const [changePic, setChangePic] = useState(false);\n  const [loading, setLoading] = useState(false); // New loading state\n\n  const toggleshow = (posts) => {\n    setShow(!show);\n    if (!show) {\n      setPosts(posts);\n    }\n  };\n\n  useEffect(() => {\n    fetch(`/user/${JSON.parse(localStorage.getItem(\"user\"))._id}`, {\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"token\")\n      },\n    }).then(res => res.json())\n      .then(result => {\n        setPic(result.post);\n        setUser(result.user);\n      });\n\n  }, [changePic]);\n\n  const ChangeProfile = () => {\n    setChangePic(!changePic);\n  };\n\n  const handleProfilePicChange = async () => {\n    setLoading(true); // Start loading\n    await new Promise(resolve => setTimeout(resolve, 2000)); // Simulate upload time (Replace this with actual upload logic)\n    setLoading(false); // Stop loading after completion\n    setChangePic(false); // Hide profile pic change modal after completion\n  };\n\n  return (\n    <div className='profile'>\n      <div className=\"profile-frame\">\n        <div className=\"profile-pic\">\n          <img\n            onClick={ChangeProfile}\n            src={user.photo ? user.photo : defaultpic}\n            alt=\"oops\"\n          />\n        </div>\n        <div className=\"profile-data\">\n          <h1>{JSON.parse(localStorage.getItem('user')).name}</h1>\n          <div className=\"profile-info\">\n            <p>{pic ? pic.length : \"0\"} post</p>\n            <p>{user.followers ? user.followers.length : \"0\"} followers</p>\n            <p>{user.following ? user.following.length : \"0\"} following</p>\n          </div>\n        </div>\n      </div>\n      <hr style={{ width: \"100%\", margin: \"25px auto\", opacity: \"0.8\" }} />\n      <div className=\"gallery\">\n        {pic.map((pics) => {\n          return <img src={pics.photo} onClick={() => { toggleshow(pics) }} alt=\"post\"/>;\n        })}\n      </div>\n      {show && <PostDetail item={posts} toggleshow={toggleshow} />}\n      {changePic && (\n        <Profilepic\n          changeProfilePic={handleProfilePicChange} // Use the new function to handle profile pic change\n        />\n      )}\n      {loading && <div className=\"loading\">Processing...</div>} {/* Display processing message */}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}