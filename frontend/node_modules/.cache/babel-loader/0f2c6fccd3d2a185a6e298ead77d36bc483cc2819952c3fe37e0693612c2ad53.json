{"ast":null,"code":"import React,{useState,useEffect}from'react';import'../css/Profile.css';// import PostDetail from './PostDetail'\nimport{useParams}from'react-router-dom';import{Link}from'react-router-dom';// 8657286846\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Userprofile(){const defaultpic=\"https://th.bing.com/th/id/OIP.SAcV4rjQCseubnk32USHigHaHx?rs=1&pid=ImgDetMain\";const{userid}=useParams();// console.log(userid)\nconst[user,setUser]=useState(\"\");const[post,setPost]=useState([]);const[isfollow,setIsfollow]=useState(false);useEffect(()=>{fetch(\"/user/\".concat(userid),{headers:{\"Authorization\":\"Bearer \"+localStorage.getItem(\"token\")}}).then(res=>res.json()).then(result=>{// console.log(result)\nsetUser(result.user);setPost(result.post||[]);if(result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)){setIsfollow(true);}});},[userid,isfollow]);const followUser=userId=>{fetch('/follow',{method:\"put\",headers:{\"Content-Type\":'application/json',\"Authorization\":\"Bearer \"+localStorage.getItem(\"token\")},body:JSON.stringify({followId:userId})}).then(res=>res.json()).then(data=>{console.log(data);setIsfollow(true);});};const UnfollowUser=userid=>{fetch('/unfollow',{method:\"put\",headers:{\"Content-Type\":'application/json',\"Authorization\":\"Bearer \"+localStorage.getItem(\"token\")},body:JSON.stringify({followId:userid})}).then(res=>res.json()).then(result=>{console.log(result);setIsfollow(false);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{src:user.photo?user.photo:defaultpic,alt:\"oops\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsx(\"h1\",{children:user.name}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"posts\",children:[post.length,\" Post\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"followbtn\",onClick:()=>{if(isfollow){UnfollowUser(user._id);}else{followUser(user._id);}followUser(user._id);},children:isfollow?\"UnFollow\":\"Follow\"}),/*#__PURE__*/_jsx(\"button\",{className:\"followbtn\",style:{color:\"white\"},children:\"Following\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Posts\"}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" Followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" Following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"100%\",margin:\"25px auto\",opacity:\"0.8\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:post.length>0?post.map(pics=>{return/*#__PURE__*/_jsx(\"img\",{src:pics.photo,alt:\"oops\"},pics._id);}):/*#__PURE__*/_jsx(\"p\",{children:\"No posts Available\"})})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","jsx","_jsx","jsxs","_jsxs","Userprofile","defaultpic","userid","user","setUser","post","setPost","isfollow","setIsfollow","fetch","concat","headers","localStorage","getItem","then","res","json","result","followers","includes","JSON","parse","_id","followUser","userId","method","body","stringify","followId","data","console","log","UnfollowUser","className","children","src","photo","alt","name","style","display","alignItems","length","onClick","color","following","width","margin","opacity","map","pics"],"sources":["D:/react/AD/proj-clone-main/frontend/src/components/Userprofile.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport '../css/Profile.css'\n// import PostDetail from './PostDetail'\nimport { useParams } from 'react-router-dom'\nimport { Link } from 'react-router-dom'\n// 8657286846\nexport default function Userprofile() {\n  const defaultpic = \"https://th.bing.com/th/id/OIP.SAcV4rjQCseubnk32USHigHaHx?rs=1&pid=ImgDetMain\"\n  const {userid} = useParams()\n  // console.log(userid)\n  const [user, setUser]= useState(\"\")\n  const [post, setPost]= useState([])\n  const [isfollow, setIsfollow] = useState(false)\n\n  useEffect(()=>{\n    fetch(`/user/${userid}`,{\n      headers:{\n        \"Authorization\":\"Bearer \"+localStorage.getItem(\"token\")\n      },\n    }).then(res=>res.json())\n    .then(result=>{\n        // console.log(result)\n        setUser(result.user)\n        setPost(result.post || [])\n        if(result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)){\n          setIsfollow(true)\n        }\n    })\n  },[userid, isfollow])\n\n  const followUser = (userId)=>{\n    fetch('/follow',{\n      method:\"put\",\n      headers:{\n        \"Content-Type\":'application/json',\n        \"Authorization\":\"Bearer \"+localStorage.getItem(\"token\")\n      },\n      body:JSON.stringify({\n        followId:userId\n      })\n    }).then((res)=>res.json())\n      .then((data)=>{\n      console.log(data)\n      setIsfollow(true)\n    })\n  }\n  const UnfollowUser = (userid)=>{\n    fetch('/unfollow',{\n      method:\"put\",\n      headers:{\n        \"Content-Type\":'application/json',\n        \"Authorization\":\"Bearer \"+localStorage.getItem(\"token\")\n      },\n      body:JSON.stringify({\n        followId:userid\n      })\n    }).then((res)=>res.json())\n      .then((result)=>{\n      console.log(result)\n      setIsfollow(false)\n    })\n  }\n\n  return (\n    <div className='profile'>\n      <div className=\"profile-frame\">\n        <div className=\"profile-pic\">\n          <img src={user.photo ? user.photo : defaultpic} alt=\"oops\" />\n        </div>\n        <div className=\"profile-data\">\n          <h1>{user.name}</h1>\n          <div style={{display: \"flex\", alignItems: \"center\"}}>\n            <p className='posts'>{post.length} Post</p>\n          <button className='followbtn' onClick={()=>{\n            if(isfollow){\n              \n              UnfollowUser(user._id)\n            }else{\n              followUser(user._id)\n            }\n            followUser(user._id)}}>{isfollow ? \"UnFollow\" : \"Follow\"}</button>\n            <button className='followbtn' style={{color: \"white\"}}>\n              Following\n              </button>\n          </div>\n          <div className=\"profile-info\">\n            <p>Posts</p>\n            <p>{user.followers ? user.followers.length : \"0\"} Followers</p>\n            <p>{user.following ? user.following.length : \"0\"} Following</p>\n          </div>\n        </div>\n      </div>\n      <hr style={{\n        width:\"100%\",\n        margin:\"25px auto\",\n        opacity:\"0.8\"\n        }}/>\n      <div className=\"gallery\">\n        {post.length>0 ? (\n          post.map((pics)=>{\n            return <img key={pics._id} src={pics.photo} alt='oops' />\n          })\n        ):(\n          <p>No posts Available</p>\n        )\n        }\n      </div>\n      {/* {show && \n      <PostDetail item={posts} toggleshow={toggleshow}/>\n      } */}\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}